package hust.soict.sec.main;
import java.util.*;

import com.fasterxml.jackson.core.JsonProcessingException;
import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.core.*;
import com.restfb.DefaultFacebookClient;
import com.restfb.FacebookClient;
import com.restfb.Version;
import com.restfb.types.User;

import hust.soict.sec.objectFb.user.*;

public class Main {
	public static ArrayList<UserInfo> fullUser = new ArrayList<UserInfo>();
	

	public static void main(String[] args) throws JsonProcessingException {
		// TODO Auto-generated method stub
		
		//Get the accessToken from keyboard
		Scanner scanner = new Scanner(System.in);
        System.out.print("Enter the Facebook access token: ");
        String accessToken = scanner.nextLine();
        AccessToken.setAccessToken(accessToken);
        
        //Get and add UserInfo
    	FacebookClient fbClient = new DefaultFacebookClient(accessToken, Version.VERSION_12_0);
    	User user = fbClient.fetchObject("me", User.class);
        UserInfo userClient = new UserInfo(user.getId(), user.getName());
        fullUser.add(userClient);
        
        
        //Transfer to JSON file
		ObjectMapper mapper = new ObjectMapper();
		String jsonUser = mapper.writeValueAsString(fullUser);
		
		System.out.println(jsonUser);
		
		mapper.writeValue(new File("E:\\Nam_2\\2022.2\\prj1\\test_prj\\JSONData\\JSONUser.json"), fullUser);
	}

}
